dist: trusty
language: node_js
node_js:
  - "10.10.0"
cache:
  yarn: true
  directories:
    - node_modules
before_install:
  - yarn global add greenkeeper-lockfile@1
install: yarn
before_script: greenkeeper-lockfile-update
after_script: greenkeeper-lockfile-upload
jobs:
  include:
    - stage: "lint"
      name: "Check for code smell"
      script: yarn lint
    - stage: "test"
      name: "Unit Test"
      script: yarn test
    - stage: "build"
      name: "Build app"
      script: yarn build
    - stage: "deploy"
      name: "Deploy to GH Pages"
      script: 
        # - git config --global user.name ${Name}
        # - git config --global user.email ${Email}
        # - git remote rm origin
        # - git remote add origin https://linux-nerd:${GITHUB_TOKEN}@github.com/linux-nerd/coding-coach.git
        # - echo https://linux-nerd:${GITHUB_TOKEN}@${GH_REF}
        # - yarn run deploy
        - echo ${Email}
        - echo $Email
        - echo https://linux-nerd:${GITHUB_TOKEN}@${GH_REF}
stages:
  - lint
  - test
  - build
  - name: deploy
    if: branch = feature/automate_deployment
notifications:
  email: true
